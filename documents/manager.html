<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="samuraidocs.css" >
    <link rel="icon" href="../icons/samurai-icon.png" >
    <title>SamurAI Dig Here Game Manager</title>
  </head>
  <body>
    <span style="float:left">
      <a href="manager-jp.html" target="_blank">日本語</a>
    </span>
    <h1>SamurAI Dig Here Game Manager</h1>
    <center>
      <p>
	IPSJ Programming Contest Committee<br>
	2019/10/03
      </p>
      <p>
	The <em>SamurAI Dig Here</em> game manager is a tool to play
	games of <em>SamurAI Dig Here</em> between two player agent
	programs and generates log of the games.
      </p>
    </center>

    <h2>Functionalities</h2>
    <p>
      The SamurAI Dig Here game manager is for the following.
      <dl>
	<dt>Playing games:</dt>
	<dd>
	  Given a game field configuration, a game by between two
	  player player agent programs can be played, writing out the
	  play log of the game.
	</dd>
	<dt>Generating communication logs:</dt>
	<dd>
	  During games,
	  copies of the data sent from the manager to player agent
	  programs can be saved to an external file,
	  which may be useful for debugging player agent programs.
	</dd>
	<dt>Verifying play logs:</dt>
	<dd>
	  A play log file given can be checked for its consistency.
	</dd>
      </dl>
    </p>

    <h2>Usage</h2>
    <p>
      The command line should be in the following format.
      <pre>
./manager [<em>options</em>] &lt;<em>log</em>&gt; [&lt;<em>player1</em>&gt; &lt;<em>player2</em>&gt;]
      </pre>
    </p>
    <h3>Game Field</h3>
    <p>
      The argument &lt;<em>log</em>&gt; is a path to a file describing the
      game field configuration and (possibly empty) play logs on the
      field.  This file is usually prepared with
      <a href="help.html"> the SamurAI Dig Here web page</a> with the
      file name extension "<tt>.dighere</tt>".
    </p>
    <h3>Player Programs</h3>
    <p>
      When the arguments &lt;<em>player1</em>&gt; and
      &lt;<em>player2</em>&gt; are omitted, the manager checks the
      consistency of the log file.
    </p>
    <p>
      When &lt;<em>player1</em>&gt; and &lt;<em>player2</em>&gt; are
      given, they are interpreted as paths to the player agent
      programs.  The manager make these two players play a game on the
      game field specified by the given path &lt;<em>log</em>&gt;.
      See below for more details.
    </p>
    <h3>Options</h3>
    <p>
      The following options are available.
      <dl>
	<dt><tt>-S</tt>:</dt>
	<dd>
	  Output summary of each game step played to the standard error.
	  The summary consists of the following lines.
	  <div class="exampleText">
	    <pre>
Step: 8
Golds known: 18@(6,6) 14@(6,8)
Agent 0@(6,7) dig  (6,8)
Agent 1@(5,6) move (5,7)X
Agent 2@(4,8) move (3,8)
Agent 3@(6,6) move (5,7)X
Scores are 14:0</pre>
	  </div>
	  <ul>
	    <li>
	      The step number of the game step.
	    </li>
	    <li>
	      Information on apparent treasures:
	      their amounts and positions.
	    </li>
	    <li>
	      The positions and play plans of four agents,
	      one line for each agent.
	      The coordinates of cell to move to, dig up, or fill up
	      are also displayed.
	      When the plan cannot be actually taken because of
	      conflicts with plans of other agents,
	      it is followed by an <tt>X</tt> to indicate it.
	    </li>
	    <li>
	      Scores of both teams up to this step.
	    </li>
	  </ul>
	  An example is shown in the figure on the right.  In this
	  example, the samurai (agent 1) and the dog (agent 3) of one
	  team planned to move to the same cell, causing a
	  conflict; they will stay in their original positions.  The
	  apparent treasure at the coordinates (6,8) is dug out by the
	  opponent samurai (agent 0).
	</dd>
	<dt><tt>-D &lt;<em>path</em>&gt;</tt></dt>
	<dd>
	  Copies of the data send from the manager to player programs
	  are saved in to the files with specified path.  As there are
	  four agents, the output goes to four files with paths
	  generated by appending agent IDs to the &lt;<em>path</em>&gt;
	  specified.
	  The IDs are the following.
	  <table>
	    <tr><td>0:</td><td>Samurai of player 1</td></tr>
	    <tr><td>1:</td><td>Samurai of player 2</td></tr>
	    <tr><td>2:</td><td>Dog of player 1</td></tr>
	    <tr><td>3:</td><td>Dog of player 2</td></tr>
	  </table>
	</dd>
      </dl>
    </p>
    <h2>Player Processes</h2>
    <p>
      Player programs are run as children processes of the manager.
      Two processes each for both teams, one controlling the samurai
      and the other controlling the dog, are run with the same
      program.  Which agent is to controlled can be known by the data
      sent from the manager.
    </p>
    <p>
      Each of the processes is given game status data from the
      standard input stream in each game step.  It should respond with
      a play plan for the step.  Further details can be found in the
      document <a href="rules.html">SamurAI Dig Here Game Rules</a>.
    </p>
  </body>
</html>
