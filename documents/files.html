<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="samuraidocs.css" >
  </head>
  <body>
    <h1>SamurAI Dig Here データファイルの形式</h1>
    <p>
      <center>
	SamurAI Dig Here ゲームシステムで用いるデータファイルの形式を述べる.
      </center>
    </p>
    <h2>データの種類</h2>
    <p>
      SamurAI Dig Here ゲーム用のデータファイルには以下のものがある.
      いずれも JSON 形式である.
      <dl>
	<dt>フィールド記述</dt>
	<dd>
	  ゲームで用いる競技フィールドを記述する形式.
	  フィールドの一辺の長さ (セル数), 最大ステップ数,
	  エージェントの初期位置,
	  穴の初期位置, 埋蔵金の位置と量を記述する.
	</dd>
	<dt>ゲームログ</dt>
	<dd>1ゲームの経過と結果を記録するためのもの.</dd>
      </dl>
    </p>
    <h2>フィールド記述</h2>
    <p>
      フィールド記述ファイルは以下の形式である.
    </p>
    <pre>
{
  "filetype": "SamurAI Dig Here Field",
  "size": <i>l</i>,
  "steps": <i>s</i>,
  "agents": [<i>A</i><sub>1</sub>, &hellip;, <i>A</i><sub>4</sub>],
  "holes": [<i>H</i><sub>1</sub>, &hellip;, <i>H<sub>n</sub></i>],
  "golds": [<i>G</i><sub>1</sub>, &hellip;, <i>G<sub>m</sub></i>]
}
    </pre>
    <p>
      上記中で <i>l</i> はフィールドの一辺のセル数,
      <i>s</i> は最大ステップ数である.
    </p>
    <p>
      <i>A</i><sub>1</sub>, <i>A</i><sub>2</sub> はチーム 1, 2 の侍,
      <i>A</i><sub>3</sub>, <i>A</i><sub>4</sub> はチーム 3, 4 の犬,
      <i>H<sub>i</sub></i> (<i>i</i> &equals; 1, &hellip;, <i>n</i>)
      は穴の初期位置である.
      初期位置は <tt>{ "x": <i>x</i>, "y": <i>y</i> }</tt>
      という形式で, <i>x, y</i> は位置の座標値を表す整数である。
    </p>
    <p>
      <i>G<sub>j</sub></i> (<i>j</i> &equals; 1, &hellip;, <i>m</i>)
      は埋蔵金の位置と量を
      <tt>{"x": <i>x</i>, "y": <i>y</i>, "amount": <i>g</i>}</tt>
      という形式で表す.
      ここで <i>x, y</i> は埋蔵金の位置の座標値を表す整数,
      <i>g</i> は埋蔵金の量を表す正の偶数である.
    </p>

    <h2>ゲームログ</h2>
    <p>
      ゲームログファイルは以下の形式である.
    </p>
    <pre>
{
  "filetype": "SamurAI Dig Here Game Log",
  "field": <i>F</i>,
  "steps": [<i>S</i><sub>1</sub>, &hellip;, <i>S</i><sub>s</sub>]
}      
    </pre>
    <p>
      ここで <i>F</i> はフィールド記述で,
      上述のフィールド記述ファイルとと同じ形式である.
    </p>
    <p>
      <i>S<sub>k</sub></i> (<i>j</i> &equals; 1, &hellip;, <i>s</i>)
      はステップごとのプレイログである.
      ゲームは <i>s</i> ステップ競われたわけだが,
      ゲームは埋蔵金がすべて掘り起こされた時点で終了するので,
      この <i>s</i> はフィールド記述の最大ステップ数 <i>s</i>
      とは必ずしも一致しない.
    </p>
    <p>
      ステップごとのプレイログは以下の形式である.
    </p>
    <pre>
{
  "plans": [<i>P</i><sub>1</sub>, &hellip;, <i>P</i><sub>4</sub>],
  "actions": [<i>A</i><sub>1</sub>, &hellip;, <i>A</i><sub>4</sub>],
  "dug": [<i>g</i><sub>1</sub>, <i>g</i><sub>2</sub>]
}
    </pre>
    <p>
      ここで <i>P<sub>i</sub></i> は各エージェントの行動指示を,
      <i>A<sub>i</sub></i> は他のエージェントとの干渉を受けた実際の行動を,
      それぞれ整数値ひとつで表す.
      添字 1 はチーム 1 の侍, 2 はチーム 2 の侍,
      3 はチーム 1 の犬, 4 はチーム 2 の犬を表す.
    </p>
    <p>
      <i>g</i><sub>1</sub>, <i>g</i><sub>2</sub> は,
      それぞれチーム 1 と 2 の侍がこのステップで掘り出した埋蔵金量である.
    </p>
    <p>
      なお, ステッププレイログ中の <tt>actions</tt> や <tt>dug</tt> は,
      フィールド記述に示された状態から
      <tt>plans</tt> の情報に従ってゲームの進行を追えば得られる冗長な情報である.
    </p>
    <p>
      ゲームログには上記の他に,
      対戦チームの情報,
      ゲームに関する情報 (「予選第 5 ラウンドのゲーム」など),
      ログを出力したシステムのバージョンなどの要素を付加することもありうる.
    </p>
  </body>
